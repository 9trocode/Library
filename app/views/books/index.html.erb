<div class="listing"><div id="title"><h1>Listing books</h1></div>

<div class="table"><table>
  <thead>
    <tr>
      <th>Title</th>
      <th>Author</th>
      <th>Category</th>
      <th></th>
      <% if user_signed_in? %>
      <th></th>
      <th></th>
      <% end %>
    </tr>
  </thead>
 
  <tfoot>
  <% if user_signed_in? %> 
    <div class="link"><%= link_to 'New Book', new_book_path %></div> 
  <% end %>
  </tfoot>
 
  <tbody>
    <% @books.each do |book| %>
      <tr>
        <div class="info">
	         <td><%= link_to book.title, book %></td>
            <% if book.author %><td><%= book.author.full_name %></td><% end %>
            <% if book.categories.empty? %><td>No categories<% end %></td>
		          <% book.categories.each do |category| %><td><%= link_to category.name, category %></td><% end %>
	       </div>
	
         <div id="reserve">
	         <td><% if book.reservation.nil? %><%= link_to 'Reserve', reservations_path(:reservation => {:book_id => book.id}), method: :create  %><% else %>The book is unavailable.<% end %></td>
         </div>
		        
        
          <% if user_signed_in? %> 
              <div class="buttons">
		            <td><%= link_to 'Edit', edit_book_path(book) %></td>
        	      <td><%= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
              </div> 
          <% end %>
                  
	   </tr>
   <% end %> 
  </tbody>

</table></div>



</div>